/*! For license information please see yii.gridView.js.LICENSE.txt */
!function(){"use strict";!function(e){e.fn.yiiGridView=function(i){return c[i]?c[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(e.error("Method "+i+" does not exist in jQuery.yiiGridView"),!1):c.init.apply(this,arguments)};var i={filterUrl:void 0,filterSelector:void 0,filterOnFocusOut:!0},t={},r={beforeFilter:"beforeFilter",afterFilter:"afterFilter"},n={},c={init:function(r){return this.each((function(){var n=e(this),a=e.extend({},i,r||{}),l=n.attr("id");void 0===t[l]&&(t[l]={}),t[l]=e.extend(t[l],{settings:a});var f=!1;o(n,"filter","change.yiiGridView keydown.yiiGridView",a.filterSelector,(function(e){if("keydown"===e.type){if(13!==e.keyCode)return;f=!0}else if(f)return void(f=!1);return!(!a.filterOnFocusOut&&"keydown"!==e.type||(c.applyFilter.apply(n),1))}))}))},applyFilter:function(){var i=e(this),n=t[i.attr("id")].settings,c={};e.each(e(n.filterSelector).serializeArray(),(function(){this.name in c||(c[this.name]=[]),c[this.name].push(this.value)}));var o=Object.keys(c);e.each(yii.getQueryParams(n.filterUrl),(function(i,t){-1===o.indexOf(i)&&-1===o.indexOf(i.replace(/\[\d*\]$/,""))&&(e.isArray(t)||(t=[t]),i in c?e.each(t,(function(t,r){e.inArray(r,c[i])&&c[i].push(r)})):c[i]=t)}));var a=n.filterUrl.indexOf("?"),l=a<0?n.filterUrl:n.filterUrl.substring(0,a),f=n.filterUrl.indexOf("#");a>=0&&f>=0&&(l+=n.filterUrl.substring(f)),i.find("form.gridview-filter-form").remove();var d=e("<form/>",{action:l,method:"get",class:"gridview-filter-form",style:"display:none","data-pjax":""}).appendTo(i);e.each(c,(function(i,t){e.each(t,(function(t,r){d.append(e("<input/>").attr({type:"hidden",name:i,value:r}))}))}));var s=e.Event(r.beforeFilter);i.trigger(s),!1!==s.result&&(d.submit(),i.trigger(r.afterFilter))},setSelectionColumn:function(i){var r=e(this),n=e(this).attr("id");if(void 0===t[n]&&(t[n]={}),t[n].selectionColumn=i.name,i.multiple&&i.checkAll){var c="input[name='"+i.checkAll+"']",a=(i.class?"input."+i.class:"input[name='"+i.name+"']")+":enabled";o(r,"checkAllRows","click.yiiGridView","#"+n+" "+c,(function(){r.find(a+(this.checked?":not(:checked)":":checked")).prop("checked",this.checked).change()}));var l=function(){var e=r.find(a).length==r.find(a+":checked").length;r.find(c+(e?":not(:checked)":":checked")).prop("checked",e).change()};o(r,"checkRow","click.yiiGridView","#"+n+" "+a,l),r.find(a).length&&l()}},getSelectedRows:function(){var i=e(this),r=t[i.attr("id")],n=[];return r.selectionColumn&&i.find("input[name='"+r.selectionColumn+"']:checked").each((function(){n.push(e(this).parent().closest("tr").data("key"))})),n},destroy:function(){var i=[".yiiGridView",r.beforeFilter,r.afterFilter].join(" ");this.off(i);var c=e(this).attr("id");return e.each(n[c],(function(i,t){e(document).off(t.event,t.selector)})),delete t[c],this},data:function(){var i=e(this).attr("id");return t[i]}};function o(i,t,r,c,o){var a=i.attr("id"),l=n[a];if(void 0!==l&&void 0!==l[t]){var f=l[t];e(document).off(f.event,f.selector)}void 0===l&&(n[a]={}),e(document).on(r,c,o),n[a][t]={event:r,selector:c}}}(window.jQuery)}();
//# sourceMappingURL=yii.gridView.js.map